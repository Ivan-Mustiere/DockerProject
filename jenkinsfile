pipeline {
    agent any

    stages {
        stage('Checkout') {
            steps {
                git 'https://github.com/Ivan-Mustiere/DockerProject.git'
            }
        }
        stage('Compilation') {
            steps {
                // Ajoutez ici les commandes de compilation de votre code source
                sh 'mvn clean install' // Exemple pour un projet Java avec Maven
            }
        }
        stage('Construction de image Docker') {
            steps {
                script {
                    // Construction de l'image Docker
                    docker.build('monapp')
                }
            }
        }
        stage('Déploiement du conteneur Docker') {
            steps {
                // Déploiement du conteneur Docker
                script {
                    docker.withRegistry('https://registry.example.com', 'credentials-id') {
                        // Déployez l'image sur un registre Docker privé ou public
                        docker.image('monapp').push('latest')
                    }
                }
            }
        }
    }
}